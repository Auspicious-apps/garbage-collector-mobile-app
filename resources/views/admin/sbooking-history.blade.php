@extends('admin/layouts/app')

@section('content')
<style>
     .tabs {
  width: 100%;
  background-color: #FFF;
  /*border-radius: 5px 5px 5px 5px;*/
}
ul#tabs-nav {
  list-style: none;
  margin: 0;
  padding: 5px;
  overflow: auto;
}
ul#tabs-nav li a.active {
    /*color: #28a745;*/
      background-color: #28a745;
}
ul#tabs-nav li {
  float: left;
  /*font-weight: bold;*/
  margin-right: 2px;
  padding: 8px 10px;
  border-radius: 5px 5px 5px 5px;
  /*border: 1px solid #d5d5de;
  border-bottom: none;*/
  cursor: pointer;
}
ul#tabs-nav li:hover,
ul#tabs-nav li.active {
 /*background-color: #28a745;*/
  color: #000;
}
#tabs-nav li a {
  text-decoration: none;
  color: #000;
}
.tab-content {
  padding: 10px;
  border: 5px  #000;
  background-color: #FFF;
}


/* Just for CodePen styling - don't include if you copy paste */
html {
  margin: 0;
  padding: 0;
}
body { 
  font-family: "HelveticaNeue-Light", "Helvetica Neue Light", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; 
  /*font-weight: 300;*/
  margin: 2em;
}
</style>
<main class="content-main-block">
    <section class="main-page-handle">
      <div class="page-handle-name">
        <span>Plataforma</span>
        <span class="space">/</span>
        <span>Histórico de registros</span>
      </div>
       <div class="main-page-name">
        <h2>Histórico de registros</h2>
       </div>
    </section>
<section class="history-block-main input-daterange">
      <div class="date-block">
          <form class="flex-box" >
             <div class="col-list-main">
            <div class="col-list">
              <label>Data inicial</label>
              <input type="date" id="from_date" name="from_date">
            </div>
             <div class="col-list">
              <label>Data final</label>
              <input type="date" id="to_date" name="to_date">
            </div>
          </div>
            <div class="search-btn">
            <button class="search-btn" type="submit" id="search">Pesquisa</button>
          </div>
        </form>
</section>
    <div class="tabs">
 <ul id="tabs-nav">
     <li><a  class="{{ Request::segment(1) === 'bhistory' ? 'active' : null }} nav-link" href="{{ url('/bhistory')}} ">Fornecedor</a></li>
    <li><a class="{{ Request::segment(1) === 'data' ? 'active' : null }} nav-link" href="{{ url('/data')}} ">Coletor</a></li>

  </ul><!-- END tabs-nav -->
   
<!--   <div id="tabs-content"> -->
  
    <div id="tab1" class="tab-content">
      <section class="activities-details">
          <table  id="myTable">
            <thead>
              <tr>
                <th scope="col">Número</th>
                <th scope="col">Nome do Fornecedor</th>
                <th scope="col">Nome do coletor</th>
                <th scope="col">Status</th>
                 <th scope="col">data e hora</th>
                 <th scope="col">Ação</th> 
              </tr>
            </thead>
            <tbody>
                <?php $index=1; ?>
              @foreach($datas as $data)
              <?php $sdata = App\User::where('id',$data->supplier_id)->where('status','0')->first();
                 $cdata = App\User::where('id',$data->collector_id)->where('status','0')->first(); 
                if($sdata!=null && $cdata!=null){ ?>

              <tr>
                <td><?php echo $index++; ?></td>
               <?php $sdata = App\User::where('id',$data->supplier_id)->first(); ?>
               <td><?php echo $sdata->name; ?></td>
                <?php $cdata = App\User::where('id',$data->collector_id)->first(); ?>
               <td><?php echo $cdata->name; ?></td>
               @if($data->status == '3')
                <td  class="completed">Job Completed</td>
                @elseif($data->status == '2')
                <td class="cancel">Cancel</td>
                 @elseif($data->status == '1')
                <td>In Process</td>
                @endif
                <td>{{ $data->time }} on {{$data->date}}</td>
                <td class="view-delete"><a href="{{url('/booking-history-detail/'.$data->id)}}"><svg width="21" height="14" viewBox="0 0 21 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M9.85125 0.270996H10.3888C10.4185 0.277965 10.4487 0.282938 10.4791 0.285882C11.3299 0.316066 12.1601 0.466161 12.9726 0.715905C14.5189 1.19141 15.8993 1.97207 17.1447 2.99648C18.4023 4.03018 19.4418 5.24727 20.1989 6.69592C20.2233 6.74264 20.2433 6.77985 20.2086 6.83609C19.9605 7.24006 19.7387 7.66305 19.467 8.04946C18.2834 9.73606 16.7637 11.0472 14.946 12.0117C13.5071 12.7747 11.9782 13.2261 10.3412 13.268C9.10946 13.2995 7.91822 13.0797 6.76191 12.6615C5.38211 12.1626 4.14207 11.4225 3.01988 10.4826C1.87763 9.52601 0.91504 8.41766 0.191236 7.10961C0.131901 7.00231 0.0638833 6.89976 0 6.79495V6.7536C0.0244714 6.72155 0.0473096 6.68829 0.0684303 6.65395C0.345671 6.15777 0.633869 5.67027 0.975614 5.21564C2.18878 3.60071 3.6971 2.33842 5.50058 1.42875C6.728 0.808525 8.02283 0.415716 9.40014 0.30883C9.55044 0.296839 9.70074 0.284021 9.85125 0.270996ZM10.3681 1.71612C9.16073 1.71612 8.13116 1.90219 7.17849 2.27143C4.95822 3.1301 3.17335 4.54056 1.82388 6.50282C1.63781 6.77158 1.63781 6.77572 1.82388 7.04572C3.14702 8.96002 4.88786 10.3528 7.04638 11.224C7.99223 11.604 8.97715 11.8153 9.99949 11.8312C11.169 11.8494 12.2865 11.6013 13.3634 11.158C14.6996 10.6081 15.8753 9.81276 16.9179 8.8173C17.5328 8.23451 18.0754 7.5798 18.5338 6.8673C18.5799 6.79515 18.5799 6.74574 18.5311 6.67793C18.4306 6.53859 18.3432 6.38994 18.2417 6.25101C17.0523 4.61788 15.539 3.37957 13.7016 2.53606C12.5672 2.01445 11.3762 1.72088 10.3675 1.71695L10.3681 1.71612Z" fill="#1B4B77"/>
                    <path d="M12.1338 3.80296C11.5857 3.69359 11.0885 4.0188 10.891 4.43745C10.786 4.66145 10.7542 4.9129 10.8004 5.15597C10.8466 5.39904 10.9683 5.62134 11.1482 5.7912C11.3254 5.95669 11.5499 6.06257 11.7904 6.09398C12.0308 6.12538 12.275 6.08074 12.4887 5.96631C12.8981 5.74385 13.1759 5.21625 13.0602 4.75728C13.9107 5.88878 14.0345 7.90927 12.6541 9.31925C11.2983 10.7044 9.06529 10.7369 7.65924 9.39244C6.23106 8.0269 6.16201 5.7331 7.4986 4.30369C8.84614 2.8627 10.8898 2.88172 12.1338 3.80296Z" fill="#1B4B77"/>
                    </svg></a>
                       <form method="post" action="{{url('delete-booking')}}">
            @csrf
            <input type="hidden" name="id" value="{{$data->id}}">
          <button type="submit" class="show_confirm"><svg width="14" height="16" viewBox="0 0 14 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                          <path d="M3.09927 15.5417C2.81444 15.4699 2.5489 15.3623 2.33379 15.1452C2.04561 14.8533 1.94844 14.4887 1.91692 14.0896C1.79267 12.5187 1.66398 10.9453 1.53751 9.37333C1.43441 8.0884 1.33192 6.80334 1.23005 5.51816C1.2052 5.211 1.18221 4.90345 1.14698 4.59704C1.14154 4.56546 1.12942 4.53549 1.11148 4.50922C1.09354 4.48295 1.07021 4.46102 1.04313 4.44498C0.519448 4.19978 0.186394 3.66224 0.231271 3.11785C0.283193 2.48603 0.671879 2.004 1.25675 1.86106C1.3871 1.83314 1.52009 1.82039 1.65322 1.82304C2.30485 1.81924 2.95611 1.82304 3.60738 1.82304H3.78021C3.78021 1.6782 3.78021 1.54781 3.78021 1.41779C3.788 0.591714 4.35729 0.00551227 5.16432 0.00285117C6.31429 -0.000950391 7.46401 -0.000950391 8.61349 0.00285117C9.42052 0.00551227 9.98982 0.591714 9.99798 1.41779C9.99798 1.54819 9.99798 1.6782 9.99798 1.82304H10.1708C10.8384 1.82304 11.5034 1.82038 12.1695 1.82304C12.8207 1.82646 13.3136 2.20054 13.4961 2.82171C13.6815 3.45163 13.3652 4.15986 12.7733 4.42331C12.6757 4.46665 12.6301 4.51227 12.6212 4.62669C12.54 5.68505 12.4525 6.74303 12.3664 7.801C12.2821 8.84263 12.1974 9.88553 12.1124 10.9297C12.0285 11.9679 11.9392 13.0053 11.8661 14.0439C11.829 14.5526 11.6977 15.0061 11.2582 15.2927C11.0847 15.4068 10.874 15.4608 10.68 15.5417H3.09927ZM2.04339 4.56283C2.11311 5.43719 2.18172 6.30395 2.25181 7.16956C2.34577 8.32803 2.43998 9.48674 2.53443 10.6457C2.62789 11.7991 2.7169 12.9533 2.81259 14.1051C2.84485 14.4944 2.99802 14.6298 3.37483 14.6298H10.4059C10.4504 14.6298 10.495 14.6298 10.5391 14.6275C10.6406 14.6211 10.7367 14.5788 10.8111 14.5078C10.8855 14.4368 10.9336 14.3415 10.9471 14.2382C10.96 14.153 10.9663 14.0671 10.9734 13.9816C11.0268 13.3168 11.08 12.6518 11.1329 11.9865C11.2182 10.9335 11.3036 9.88058 11.3891 8.8278C11.4633 7.91087 11.5375 6.99393 11.6117 6.07699C11.6521 5.57443 11.6914 5.07186 11.7318 4.56131L2.04339 4.56283ZM6.88965 3.64323H12.0864C12.1456 3.64539 12.2049 3.64412 12.264 3.63943C12.3343 3.63237 12.4018 3.60812 12.461 3.56872C12.5202 3.52933 12.5693 3.47594 12.6041 3.41305C12.639 3.35016 12.6586 3.27961 12.6613 3.20734C12.664 3.13506 12.6498 3.06317 12.6197 2.99772C12.5218 2.78864 12.3453 2.73161 12.1305 2.73161C8.63661 2.7339 5.14245 2.7339 1.64803 2.73161C1.60374 2.73041 1.55941 2.73168 1.51526 2.73542C1.40612 2.74704 1.30503 2.79957 1.23137 2.88292C1.15772 2.96628 1.1167 3.07458 1.11619 3.18704C1.1168 3.2995 1.15791 3.40776 1.23164 3.49104C1.30536 3.57433 1.40649 3.62676 1.51563 3.63829C1.57474 3.64279 1.63404 3.64406 1.69328 3.64209L6.88965 3.64323ZM9.11047 1.81848C9.11047 1.67858 9.11047 1.55237 9.11047 1.4273C9.10787 1.09314 8.93356 0.914467 8.6057 0.913326C8.18698 0.913326 7.76789 0.913326 7.3488 0.913326C6.61916 0.913326 5.88976 0.913326 5.16062 0.913326C4.901 0.913326 4.70815 1.0555 4.68033 1.28968C4.65993 1.46189 4.67625 1.63867 4.67625 1.8181L9.11047 1.81848Z" fill="#DE2E2E"/>
                          <path d="M5.0483 12.1845C5.06944 12.5376 5.09984 12.8904 5.10912 13.2436C5.11368 13.3223 5.09797 13.4008 5.06354 13.4713C5.0291 13.5417 4.97717 13.6017 4.91297 13.6451C4.84876 13.6885 4.77455 13.7138 4.69778 13.7184C4.62102 13.7231 4.54441 13.7069 4.47566 13.6716C4.40316 13.6379 4.34133 13.584 4.29721 13.5161C4.25309 13.4481 4.22845 13.3689 4.22606 13.2873C4.16499 12.304 4.10515 11.3205 4.04655 10.3369C3.97238 9.10114 3.89721 7.8655 3.82106 6.62999C3.80733 6.4019 3.78842 6.17608 3.78397 5.94875C3.77766 5.67732 3.9631 5.47356 4.21159 5.46557C4.46008 5.45759 4.65331 5.64919 4.67 5.92176C4.7961 8.00882 4.9222 10.0964 5.0483 12.1845Z" fill="#DE2E2E"/>
                          <path d="M8.71849 12.4107C8.82135 10.6906 8.92421 8.97062 9.02707 7.25079C9.05303 6.81703 9.08307 6.38328 9.10866 5.94952C9.12609 5.65375 9.31115 5.45531 9.56928 5.4652C9.82742 5.47508 10.0121 5.68949 9.99542 5.99475C9.95834 6.69576 9.91198 7.39677 9.86933 8.09778C9.81419 9.01016 9.75856 9.92253 9.70243 10.8349C9.65274 11.6519 9.60526 12.4696 9.55408 13.2862C9.54828 13.4062 9.49618 13.519 9.40923 13.5997C9.32229 13.6804 9.20763 13.7224 9.09048 13.7165C8.97333 13.7105 8.86329 13.6571 8.78455 13.568C8.70582 13.4789 8.66484 13.3614 8.67065 13.2413C8.67844 12.9634 8.7018 12.6863 8.71849 12.4088V12.4107Z" fill="#DE2E2E"/>
                          <path d="M6.4454 9.59144C6.4454 8.38255 6.4454 7.17352 6.4454 5.96437C6.4454 5.60816 6.73098 5.38121 7.03325 5.49222C7.2135 5.55836 7.30955 5.6956 7.32995 5.88872C7.33362 5.93932 7.33448 5.99008 7.33255 6.04078V13.1436C7.33255 13.5074 7.16899 13.7196 6.8875 13.7196C6.606 13.7196 6.44244 13.5074 6.44244 13.1436L6.4454 9.59144Z" fill="#DE2E2E"/>
                          </svg></button>
        
        </form>
                  </td>
             </tr>
             <?php } else { ?>
                 
              <?php } ?>
             @endforeach
            </tbody>
          </table>
  </section>
    </div>
    
  <!-- </div> -->
</div> 
    
  </main>
  @endsection